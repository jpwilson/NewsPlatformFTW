{
    "version": 2,
    "builds": [
        {
            "src": "api/index.ts",
            "use": "@vercel/node"
        },
        {
            "src": "api/prerender-article.js",
            "use": "@vercel/node"
        },
        {
            "src": "package.json",
            "use": "@vercel/static-build",
            "config": {
                "distDir": "dist/public"
            }
        }
    ],
    "rewrites": [
        {
            "source": "/api/debug/:path*",
            "destination": "/api/index.ts"
        },
        {
            "source": "/api/user/:path*",
            "destination": "/api/index.ts"
        },
        {
            "source": "/api/channels/:path*",
            "destination": "/api/index.ts"
        },
        {
            "source": "/api/:path*",
            "destination": "/api/index.ts"
        },
        {
            "source": "/articles/:slug",
            "has": [
                {
                    "type": "header",
                    "key": "user-agent",
                    "value": ".*(facebookexternalhit|Facebot|Twitterbot|WhatsApp|LinkedInBot|Pinterest|Slackbot|TelegramBot|Discordbot|googlebot|bingbot|yandex|baiduspider|duckduckbot).*"
                }
            ],
            "destination": "/api/prerender-article?path=/articles/:slug"
        },
        {
            "source": "/test-preview/articles/:slug",
            "destination": "/api/prerender-article?path=/articles/:slug&forcePrerender=true"
        },
        {
            "source": "/auth-callback",
            "destination": "/index.html"
        },
        {
            "source": "/assets/:path*",
            "destination": "/assets/:path*"
        },
        {
            "source": "/(.*)",
            "destination": "/index.html"
        }
    ]
}